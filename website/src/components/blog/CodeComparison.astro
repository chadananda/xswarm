---
export interface Props {
  title: string;
  before: {
    title: string;
    code: string;
    language?: string;
  };
  after: {
    title: string;
    code: string;
    language?: string;
  };
}

const { title, before, after } = Astro.props;
---

<div class="code-comparison my-8">
  <h3 class="text-2xl font-bold text-cyan-400 mb-6">{title}</h3>
  
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Before -->
    <div class="before-section">
      <div class="flex items-center gap-2 mb-3">
        <span class="text-red-400 text-xl">❌</span>
        <h4 class="text-lg font-semibold text-red-300">{before.title}</h4>
      </div>
      <div class="code-block bg-gray-950 border border-red-900 rounded-lg p-4 overflow-x-auto">
        <pre><code class={`language-${before.language || 'javascript'}`}>{before.code}</code></pre>
      </div>
    </div>
    
    <!-- After -->
    <div class="after-section">
      <div class="flex items-center gap-2 mb-3">
        <span class="text-green-400 text-xl">✅</span>
        <h4 class="text-lg font-semibold text-green-300">{after.title}</h4>
      </div>
      <div class="code-block bg-gray-950 border border-green-900 rounded-lg p-4 overflow-x-auto">
        <pre><code class={`language-${after.language || 'javascript'}`}>{after.code}</code></pre>
      </div>
    </div>
  </div>
</div>

<style>
  .code-block {
    font-family: 'Fira Code', monospace;
    font-size: 0.875rem;
    line-height: 1.5;
  }
  
  .code-block pre {
    margin: 0;
  }
  
  .code-block code {
    color: #e5e7eb;
  }
  
  .before-section .code-block {
    background-image: linear-gradient(135deg, rgba(127, 29, 29, 0.1) 0%, transparent 50%);
  }
  
  .after-section .code-block {
    background-image: linear-gradient(135deg, rgba(20, 83, 45, 0.1) 0%, transparent 50%);
  }
  
  .before-section:hover .code-block {
    border-color: rgba(239, 68, 68, 0.8);
    box-shadow: 0 0 20px rgba(239, 68, 68, 0.2);
  }
  
  .after-section:hover .code-block {
    border-color: rgba(34, 197, 94, 0.8);
    box-shadow: 0 0 20px rgba(34, 197, 94, 0.2);
  }
</style>
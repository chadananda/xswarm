---
export interface Props {
  icon?: string;
  title: string;
  role?: string;
  description?: string;
  image?: string;
  class?: string;
  hover?: boolean;
  compact?: boolean;
}

const { icon, title, role, description, image, class: className = '', hover = true, compact = false } = Astro.props;
---

<div class={`trading-card ${compact ? 'trading-card-compact' : ''} ${className}`}>
  <!-- Texture overlays -->
  <div class="card-texture"></div>
  <div class="card-holographic"></div>
  
  <!-- Hand-drawn corner accents -->
  <div class="card-corner card-corner-tl"></div>
  <div class="card-corner card-corner-tr"></div>
  <div class="card-corner card-corner-bl"></div>
  <div class="card-corner card-corner-br"></div>
  
  <!-- Character image section -->
  <div class="card-image-section">
    {image ? (
      <>
        <img src={image} alt={title} class="card-character-image" />
        <div class="card-image-overlay"></div>
      </>
    ) : (
      <div class="flex items-center justify-center h-full bg-gradient-to-b from-terminal-bg/50 to-terminal-bg">
        <div class={`${compact ? 'text-4xl' : 'text-6xl'} text-terminal-cyan/20 animate-pulse`}>
          {icon || '?'}
        </div>
      </div>
    )}
    
    <!-- Rarity indicator -->
    <div class="card-rarity"></div>
  </div>
  
  <!-- Content section -->
  <div class="card-content-section">
    <!-- Title with ornate frame -->
    <div class="card-title-frame">
      <h3 class={`text-center ${compact ? 'text-base' : 'text-lg'} font-bold text-terminal-green leading-tight`}>
        {title}
      </h3>
      {role && (
        <p class={`text-center ${compact ? 'text-[10px]' : 'text-xs'} text-terminal-cyan/50 font-light mt-1`}>
          ({role})
        </p>
      )}
    </div>
    
    <!-- Description -->
    {description && (
      <div class="relative px-2">
        <p class={`text-center ${compact ? 'text-[10px]' : 'text-xs'} text-terminal-green/70 leading-relaxed font-mono`}>
          {description}
        </p>
      </div>
    )}
    
    <!-- Card ID/Number with foil effect -->
    {!compact && (
      <div class="absolute bottom-2 right-2 text-xs font-mono">
        <span class="inline-block bg-gradient-to-br from-terminal-cyan/40 via-terminal-magenta/40 to-terminal-cyan/40 bg-clip-text text-transparent">
          #{String(Math.floor(Math.random() * 999) + 1).padStart(3, '0')}
        </span>
      </div>
    )}
  </div>
  
  <!-- Scan lines effect -->
  <div class="absolute inset-0 pointer-events-none opacity-10">
    <div class="h-full w-full bg-gradient-to-b from-transparent via-terminal-green/50 to-transparent animate-scan"></div>
  </div>
</div>

<style>
  @import '../styles/trading-card.css';
</style>